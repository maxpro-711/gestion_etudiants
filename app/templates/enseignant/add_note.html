{% extends "base/base_enseignant.html" %}

{% block title %}Ajouter note{% endblock %}
{% block page_title %}Ajouter une note{% endblock %}
{% block page_subtitle %}Etudiant: {{ etudiant.full_name or etudiant.username }}{% endblock %}
{% block page_actions %}
<a class="btn-ghost" href="{{ url_for('enseignant.notes_etudiant', etudiant_id=etudiant.id) }}">Retour</a>
<a class="btn" href="{{ url_for('enseignant.dashboard') }}">Dashboard</a>
{% endblock %}

{% block content %}
<!-- Formulaire d'ajout de note -->
<div class="card">
    {% if matieres|length == 0 %}
        <p>Toutes les matieres ont deja une note pour cet etudiant.</p>
    {% else %}
    <form method="POST">
        <label>Matiere</label>
        <select name="matiere_id" required>
            {% for m in matieres %}
                <option value="{{ m.id }}">{{ m.nom }}</option>
            {% endfor %}
        </select>

        <label>Note (0-20)</label>
        <input type="number" step="0.01" min="0" max="20" name="valeur">

        <label>
            <input type="checkbox" name="absence">
            Etudiant absent
        </label>

        <label>Appreciation</label>
        <textarea name="appreciation" rows="4" cols="40"
                  placeholder="Appreciation de l'enseignant (optionnel)"></textarea>

        <div class="actions-row">
            <button class="btn" type="submit">Enregistrer</button>
            <a class="btn-ghost" href="{{ url_for('enseignant.notes_etudiant', etudiant_id=etudiant.id) }}">Annuler</a>
        </div>
    </form>
    {% endif %}
</div>
{% endblock %}
